{% extends "index.html" %}
{% load i18n %}
{% load staticfiles %}

{% block content %}
<h2 class="headline">{% trans "Select a time period" %}</h2>
<div style="text-align:center;">
<form action="" method="post">
{% csrf_token %}
<p>{% trans "From" %}: <input type="text" class="dateWidget" name="start" />
    {% trans "to" %}: <input type="text" class="dateWidget" name="end" />
    <input type="submit" value="{% trans "Show" %}" />
</p>
</form>
</div>
<hr />
{% if costs %}
<h3>{% trans "Orders from" %} {{ start|date:"SHORT_DATE_FORMAT" }}
    {% trans "to" %} {{ end|date:"SHORT_DATE_FORMAT" }}</h3>
<div style="width:50%;">
<table id="dataTable">
    <thead>
        <tr>
            <th>{% trans "Short" %}</th>
            <th>{% trans "Number" %}</th>
            <th>{% trans "Weighted" %}</th>
            <th>{% trans "All" %}</th>
            <th>{% trans "Orders" %}</th>
        </tr>
    </thead>
    <tbody>
        {% for cost, sums in costs %}
        <tr>
            <td style="text-align:center;">{{ cost.0 }}</td>
            <td style="text-align:center;">{{ cost.1 }}</td>
            <td style="text-align:right;">{{ sums.0|floatformat:2 }} {{ CURRENCY_SYM }}</td>
            <td style="text-align:right;">{{ sums.1|floatformat:2 }} {{ CURRENCY_SYM }}</td>
            <td style="text-align:center;">{{ sums.2 }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
</div>
{% else %}
{% if start %}
<h3>{% trans "No orders found in this period." %}</h3>
{% endif %}
{% endif %}

<script>
$(function() {
  $('.dateWidget').datepicker({
    'dateFormat': 'dd.mm.yy',
    'dayNamesMin': ['So', 'Mo', 'Di', 'Mi', 'Do', 'Fr', 'Sa'],
    'monthNames': ['Januar', 'Februar', 'MÃ¤rz', 'April', 'Mai', 'Juni',
                   'Juli', 'August', 'September', 'Oktober', 'November',
                   'Dezember'],
    'showWeek': true,
    'firstDay': 1,
    'weekHeader': 'Wo',
    'nextText': '{% trans "next" %}',
    'prevText': '{% trans "prev" %}'
  });
});
$(function() {
  var oTable = $('#dataTable').dataTable({
    "bJQueryUI": true,
    "bPaginate": false,
    "oLanguage": {
      "sUrl": "{% static "i18n/de_DE.txt" %}"
    }
  });
});
</script>

{% endblock %}
