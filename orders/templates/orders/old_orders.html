{% extends "index.html" %}
{% load i18n %}
{% load staticfiles %}

{% block content %}
<h2 class="headline">{% trans "All ordered articles" %}</h2>
{% if orders %}
<table id="dataTable">
    <thead>
        <tr>
            <th>{% trans "Article Name" %}</th>
            <th>{% trans "Art. ID" %}</th>
            <th>{% trans "Supplier" %}</th>
            <th>{% trans "Quantity" %}</th>
            <th>{% trans "Price" %}</th>
            <th>{% trans "Last Orderer" %}</th>
            <th>{% trans "Last Order" %}</th>
            <th>{% trans "Sums" %}</th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        {% for o in orders %}
        <tr>
            <td>{{ o.article.name }}</td>
            <td style="text-align:center;">{{ o.article.ident }}</td>
            <td>{{ o.article.supplier }}</td>
            <td>{{ o.article.quantity }}</td>
            <td style="text-align:right;"><a href="" title="{% trans "Sum of all orders" %}: {{ o.sums|floatformat:2 }}{{ CURRENCY_SYM }}">
                {{ o.article.fullprice }}</a>
            </td>
            <td>{{ o.userlist|join:", " }}</td>
            <td><a href="" title="{% trans "Ordered" %}: {% for d in o.olist %}{{ d|date:"SHORT_DATE_FORMAT" }}{% if not forloop.last %}, {% endif %}{% endfor %}">
                {{ o.ordered|date:"SHORT_DATE_FORMAT" }}</a>
            </td>
            <td><a href="" title="{% trans "Orders" %}">{{ o.olist|length }}</a> /
                <a href="" title="{% trans "Count" %}">{{ o.counts }}</a>
            </td>
            <td><a href="{% url orders-order o.article.id %}">{% trans "ReOrder" %}</a>
                {% if perms.orders.extra_order %}
                <a href="{% url orders-extra-order o.article.id %}">{% trans "Now" %}</a>
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<script>
$(document).ready(function() {
  $(document).tooltip();
  var oTable = $('#dataTable').dataTable({
    "bJQueryUI": true,
    "bPaginate": true,
    "iDisplayLength": 25,
    "aLengthMenu": [[25, 50, 100, -1], [25, 50, 100, "{% trans "All" %}"]],
    "oLanguage": {
      "sUrl": "{% static "i18n/de_DE.txt" %}"
    }
  });
});
</script>

{% else %}
<p>{% trans "No orders found." %}</p>
{% endif %}

{% endblock %}
